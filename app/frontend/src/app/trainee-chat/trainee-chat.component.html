<div class="chat-container" *ngIf="isOpen">
    <div class="chat-header">
        <div class="chat-header-left">
            <div class="support-icon">
                <fa-icon [icon]="faHeadset"></fa-icon>
            </div>
            <div>
                <div class="support-title">Periskal Support</div>
                <div class="support-status">Online - Ready to help</div>
            </div>
        </div>
        <button class="close-button" (click)="toggleChat()">&times;</button>
    </div>

    <div class="chat-body" #chatBody>
        <div class="message">
            <div class="message-avatar">
                <fa-icon [icon]="faHeadset"></fa-icon>
            </div>
            <div class="message-content">
                <p>ðŸ‘‹ Hi there! How can I help you today?</p>
                <p>Feel free to ask about:</p>
                <ul class="topic-list">
                    <li>Certificate requirements</li>
                    <li>Training progress</li>
                    <li>Technical support</li>
                    <li>General questions</li>
                </ul>
            </div>
        </div>
        @for(message of messageList; track $index) {
            @if(message.chat_member_id==chatMemberId) {
                <div class="message my-message">
                    <div class="message-content">
                        {{message.text_content}}
                    </div>
                </div>
            }
            @else {
                <div class="message">
                    <div class="message-avatar">
                        <fa-icon [icon]="faHeadset"></fa-icon>
                    </div>
                    <div class="message-content">
                        {{message.text_content}}
                    </div>
                </div>
            }
        }
    </div>

    <div class="chat-input">
        <input type="text" class="input-field" placeholder="Type your question here..." [(ngModel)]="message" (keydown.enter)="sendMessage()" maxlength="255">
        <button class="send-button" (click)="sendMessage()">
            <fa-icon [icon]="faPaperPlane"></fa-icon>
        </button>
    </div>
</div>
@if(isTrainee) {
    <button class="chat-button" *ngIf="!isOpen" (click)="toggleChat()"><fa-icon [icon]="faComments"></fa-icon></button>
}
  